:root {
  --callout-summary: #00bfbc;
  --callout-summary-accent: #e5f8f8;
  --callout-bug: #e93147;
  --callout-bug-accent: #fdeaec;
  --callout-danger: #e93147;
  --callout-danger-accent: #fdeaec;
  --callout-example: #7852ee;
  --callout-example-accent: #f1edfd;
  --callout-fail: #e93147;
  --callout-fail-accent: #fdeaec;
  --callout-info: #086ddd;
  --callout-info-accent: #e6f0fc;
  --callout-todo: #086ddd;
  --callout-todo-accent: #e6f0fc;
  --callout-note: #086ddd;
  --callout-note-accent: #e6f0fc;
  --callout-question: #e0ac00;
  --callout-question-accent: #fcf7e5;
  --callout-quote: #9e9e9e;
  --callout-quote-accent: #f5f5f5;
  --callout-done: #0aba4f;
  --callout-done-accent: #e6f8ed;
  --callout-important: #00bfbc;
  --callout-important-accent: #e5f8f8;
  --callout-warning: #ec7500;
  --callout-warning-accent: #fdf1e5;
  --callout-media: #8b5cf6;
  --callout-media-accent: #f3eefe;
  --callout-resource: #d4b68a;
  --callout-resource-accent: #f9f6f0;
}

[saved-theme=dark] {
  --callout-summary: #53dfdd !important;
  --callout-summary-accent: #233232 !important;
  --callout-bug: #fb464c !important;
  --callout-bug-accent: #352223 !important;
  --callout-danger: #fb464c !important;
  --callout-danger-accent: #352223 !important;
  --callout-example: #a882ff !important;
  --callout-example-accent: #2c2835 !important;
  --callout-fail: #fb464c !important;
  --callout-fail-accent: #352223 !important;
  --callout-info: #1e7aff !important;
  --callout-info-accent: #1e2735 !important;
  --callout-todo: #1e7aff !important;
  --callout-todo-accent: #1e2735 !important;
  --callout-note: #1e7aff !important;
  --callout-note-accent: #1e2735 !important;
  --callout-question: #e0de71 !important;
  --callout-question-accent: #323227 !important;
  --callout-quote: #9e9e9e !important;
  --callout-quote-accent: #2b2b2b !important;
  --callout-done: #44cf6e !important;
  --callout-done-accent: #223026 !important;
  --callout-important: #53dfdd !important;
  --callout-important-accent: #233232 !important;
  --callout-warning: #e9973f !important;
  --callout-warning-accent: #332a21 !important;
  --callout-media: #8b5cf6 !important;
  --callout-media-accent: #292434 !important;
  --callout-resource: #c9a26b !important;
  --callout-resource-accent: #2f2c26 !important;
}

blockquote.callout-collapsible {
  cursor: pointer;

  &.callout-collapsible::after {
    content: '-';
    right: 6px;
    font-weight: bolder;
    font-family: Courier New, Courier, monospace;
  }
}

blockquote.callout-collapsed {
  & > p { border-bottom-right-radius: 5px !important; }
  padding-bottom: 0 !important;
  &::after {
    content: '+' !important;
  }
  & > *:not(:first-child) {
    display: none !important;
  }
}

blockquote[class*="-callout"] {
  margin-right: 0;
  border-radius: 5px;
  position: relative;
  padding-left: 0 !important;
  padding-bottom: 0.25em;
  color: var(--dark);
  border-left: 6px solid var(--primary) !important;
  & > p {
    border-top-right-radius: 5px;
    padding: 0.5em 1em;
    margin: 0;
    color: var(--gray);
    &:first-child {
      font-weight: 600;
      padding: 0.4em 30px;
    }
  }
}

blockquote[class*="-callout"] > p:first-child::after, blockquote.callout-collapsible::after {
  display: inline-block;
  height: 18px;
  width: 18px;
  position: absolute;
  top: 0.4em;
  margin: 0.2em 1em;
}

blockquote[class*="-callout"] > p:first-child {
  font-weight: bold;
  padding: 0.4em 37px;

  &::after {
    left: 0;
  }
}

blockquote[class*="-callout"] > p:empty {
  padding: 1.2em 37px;
}

$summary: summary, abstract, tldr;
$bug: bug;
$danger: danger, error;
$example: example;
$fail: fail, failure, missing;
$info: info;
$todo: todo;
$note: note;
$question: question, help, faq;
$quote: quote, cite;
$done: done, success, check;
$important: important, tip, hint;
$warning: warning, caution, attention;
$media: media, video, audio, recording;
$resource: resource, document, attachment, file;
$types: $summary, $bug, $danger, $example, $fail, $info, $note, $question, $quote, $done, $important, $warning, $media, $resource;
$svgs: ();
$svgs: map-merge($svgs, ($summary: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-clipboard-list'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'%3E%3C/rect%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'%3E%3C/path%3E%3Cpath d='M12 11h4'%3E%3C/path%3E%3Cpath d='M12 16h4'%3E%3C/path%3E%3Cpath d='M8 11h.01'%3E%3C/path%3E%3Cpath d='M8 16h.01'%3E%3C/path%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($bug: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-bug'%3E%3Crect width='8' height='14' x='8' y='6' rx='4'/%3E%3Cpath d='m19 7-3 2'/%3E%3Cpath d='m5 7 3 2'/%3E%3Cpath d='m19 19-3-2'/%3E%3Cpath d='m5 19 3-2'/%3E%3Cpath d='M20 13h-4'/%3E%3Cpath d='M4 13h4'/%3E%3Cpath d='m10 4 1 2'/%3E%3Cpath d='m14 4-1 2'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($danger: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-bug'%3E%3Crect width='8' height='14' x='8' y='6' rx='4'/%3E%3Cpath d='m19 7-3 2'/%3E%3Cpath d='m5 7 3 2'/%3E%3Cpath d='m19 19-3-2'/%3E%3Cpath d='m5 19 3-2'/%3E%3Cpath d='M20 13h-4'/%3E%3Cpath d='M4 13h4'/%3E%3Cpath d='m10 4 1 2'/%3E%3Cpath d='m14 4-1 2'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($example: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-list'%3E%3Cline x1='8' x2='21' y1='6' y2='6'/%3E%3Cline x1='8' x2='21' y1='12' y2='12'/%3E%3Cline x1='8' x2='21' y1='18' y2='18'/%3E%3Cline x1='3' x2='3.01' y1='6' y2='6'/%3E%3Cline x1='3' x2='3.01' y1='12' y2='12'/%3E%3Cline x1='3' x2='3.01' y1='18' y2='18'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($fail: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-x'%3E%3Cpath d='M18 6 6 18'/%3E%3Cpath d='m6 6 12 12'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($info: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-info'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3Cpath d='M12 16v-4'/%3E%3Cpath d='M12 8h.01'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($todo: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-check-circle-2'%3E%3Cpath d='M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z'/%3E%3Cpath d='m9 12 2 2 4-4'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($note: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='svg-icon lucide-pencil'%3E%3Cline x1='18' y1='2' x2='22' y2='6'/%3E%3Cpath d='M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($question: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-help-circle'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3Cpath d='M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3'/%3E%3Cpath d='M12 17h.01'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($quote: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-quote'%3E%3Cpath d='M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z'/%3E%3Cpath d='M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($done: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-check'%3E%3Cpolyline points='20 6 9 17 4 12'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($important: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-flame'%3E%3Cpath d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($warning: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-alert-triangle'%3E%3Cpath d='m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z'/%3E%3Cpath d='M12 9v4'/%3E%3Cpath d='M12 17h.01'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($media: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-play'%3E%3Cpolygon points='5 3 19 12 5 21 5 3'/%3E%3C/svg%3E")));
$svgs: map-merge($svgs, ($resource: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-package'%3E%3Cpath d='M16.5 9.4 7.55 4.24'/%3E%3Cpath d='M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z'/%3E%3Cpolyline points='3.29 7 12 12 20.71 7'/%3E%3Cline x1='12' x2='12' y1='22' y2='12'/%3E%3C/svg%3E")));

@function getstr($l) {
  $v: nth($l, 1);
  @return $v;
}

@each $type in $types {
  @each $s in $type {
    blockquote.#{$s}-callout {
      border-left: 6px solid var(--callout-#{getstr($type)}) !important;
      background-color: var(--callout-#{getstr($type)}-accent) !important;
      & > p:first-child {
        color: var(--callout-#{getstr($type)}) !important;
        &::after {
          content: '';
          -webkit-mask: map-get($svgs, $type);
          mask: map-get($svgs, $type);
          background-color: var(--callout-#{getstr($type)}) !important;
          -webkit-mask-size: contain;
          mask-size: contain;
          -webkit-mask-repeat: no-repeat;
          mask-repeat: no-repeat;
          -webkit-mask-position: center;
          mask-position: center;
        }
      }
    }
  }
}
